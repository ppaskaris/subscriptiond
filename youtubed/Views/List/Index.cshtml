@using Humanizer

@model youtubed.Models.ListViewModel

@{
    ViewData["Title"] = "Your List";
}

<h1>@ViewData["Title"]</h1>
<p>
    This is a <strong>secret list</strong> that is only visible to those with a
    copy of <a asp-action="Index" asp-route-id="@Model.Id" asp-route-token="@Model.Token">this link</a>.
    Consider bookmarking it as it cannot be recovered if you lose it.
</p>
<p>
    If you do not access this list again within @Model.MaxAge.Humanize(), it
    will be automatically deleted.
</p>

<h2>Videos</h2>
@if (Model.StaleCount > 0)
{
    <div class="alert alert-info" role="alert">
        There @(Model.StaleCount == 1 ? "is" : "are") @Model.StaleCount
        @(Model.StaleCount == 1 ? "channel" : "channels") in this list waiting
        to be updated. <a class="alert-link" asp-action="Index" asp-route-id="@Model.Id" asp-route-token="@Model.Token">Refresh</a>
    </div>
}
@if (Model.Videos.Any())
{
    <ol class="video-list">
        @foreach (var video in Model.Videos)
        {
            <li class="video-item">
                <a href="@video.VideoUrl" rel="noopener noreferrer">
                    <div class="video-image">
                        <img src="@video.VideoThumbnail" alt="video thumbnail" referrerpolicy="no-referrer" width="210" height="118" />
                        <span class="video-duration">@video.VideoDuration.Humanize()</span>
                    </div>
                    <span class="video-title">@video.VideoTitle</span>
                    <span class="channel-title">@video.ChannelTitle</span>
                    <span class="video-published-at">@video.VideoPublishedAt.Humanize()</span>
                </a>
            </li>
        }
    </ol>
}
else
{
    <p>
        <em>No recent videos.</em>
    </p>
}

<p>
    <a asp-action="AddChannel" asp-route-id="@Model.Id" asp-route-token="@Model.Token">Add New Channel</a>
</p>
